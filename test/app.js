const mf = machineLearningLib.matrixFunctions;
const nn = machineLearningLib.neuralNetworkFunctions;

console.log = function (text, otherstuff) {
    document.querySelector("#result").innerHTML += "<div>" + text + "</div>";
    if (otherstuff !== undefined) {
        console.log(otherstuff);
    }
}

// let A = mf.createMatrix(100, 100);
// console.log(A);
// A = mf.initializeRandom(A)
// console.log(A);
//A = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];
//A = mf.matrixMultiplication(A, mf.transpose(A));
//console.log(A);
//B = mf.executeOnAllElements(A, function(x) { return x / 2 });
//console.log(B);
//C = mf.executeOnAllElements(A, (x) => { return (x > 50) * 1 });
//console.log(JSON.stringify(C));
//D = mf.executeOnAllElements(A, (x) => { return x - 2 });
//console.log(JSON.stringify(D));
//E = mf.executeOnAllElements(A, (x) => { return x * 2 });
//console.log(JSON.stringify(E));
//F = mf.executeOnAllElements(A, (x) => { return x + 2 });
//console.log(JSON.stringify(F));
//G = mf.addColumn(F, 1);
//console.log(JSON.stringify(G));

X = [[0.1683, -0.1923], [0.1819, -0.1502], [0.0282, 0.0300], [-0.1514, 0.1826], [-0.1918, 0.1673], [-0.0559, -0.0018], [0.1314, -0.1692], [0.1979, -0.1811], [0.0824, -0.0265], [-0.1088, 0.1525], [-0.2000, 0.1913], [-0.1073, 0.0542], [0.0840, -0.1327], [0.1981, -0.1976], [0.1301, -0.0808], [-0.0576, 0.1103]]
y = [2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1];

theta1 = [[0.8415, 0.4121, -0.9614], [0.1411, -1.0000, 0.1499], [-0.9589, 0.4202, 0.8367], [0.6570, 0.6503, -0.8462]];
theta2 = [[0.5403, -0.9111, -0.2752, 0.9912, -0.0133], [-0.9900, 0.0044, 0.9887, -0.2921, -0.9037], [0.2837, 0.9074, -0.5477, -0.7481, 0.7654], [0.7539, -0.7597, -0.5328, 0.9147, 0.2666]];


a2 = nn.forwardPropagate(mf.addColumn(X, 1), theta1);
a3 = nn.forwardPropagate(mf.addColumn(a2, 1), theta2);

J = nn.costFunction(a3, y, 4, 0);
console.log(J);
// 3.0874
// document.querySelector("#result").innerHTML = JSON.stringify(J);


/* a1 =

    1.0000    0.1683   -0.1923
    1.0000    0.1819   -0.1502
    1.0000    0.0282    0.0300
    1.0000   -0.1514    0.1826
    1.0000   -0.1918    0.1673
    1.0000   -0.0559   -0.0018
    1.0000    0.1314   -0.1692
    1.0000    0.1979   -0.1811
    1.0000    0.0824   -0.0265
    1.0000   -0.1088    0.1525
    1.0000   -0.2000    0.1913
    1.0000   -0.1073    0.0542
    1.0000    0.0840   -0.1327
    1.0000    0.1981   -0.1976
    1.0000    0.1301   -0.0808
    1.0000   -0.0576    0.1103
a2 =

    1.0000    0.7495    0.4860    0.2594    0.7169
    1.0000    0.7428    0.4842    0.2673    0.7114
    1.0000    0.6951    0.5293    0.2846    0.6570
    1.0000    0.6465    0.5793    0.2953    0.5997
    1.0000    0.6460    0.5886    0.2892    0.5964
    1.0000    0.6943    0.5490    0.2721    0.6507
    1.0000    0.7424    0.4961    0.2601    0.7080
    1.0000    0.7497    0.4790    0.2636    0.7189
    1.0000    0.7111    0.5137    0.2796    0.6755
    1.0000    0.6570    0.5678    0.2938    0.6123
    1.0000    0.6400    0.5914    0.2926    0.5903
    1.0000    0.6781    0.5638    0.2771    0.6321
    1.0000    0.7318    0.5093    0.2622    0.6951
    1.0000    0.7527    0.4784    0.2610    0.7217
    1.0000    0.7257    0.4997    0.2745    0.6921
    1.0000    0.6708    0.5536    0.2909    0.6286
a3 =

    0.4928    0.2262    0.7412    0.5876
    0.4964    0.2264    0.7383    0.5904
    0.5087    0.2422    0.7139    0.5937
    0.5191    0.2607    0.6881    0.5949
    0.5171    0.2633    0.6873    0.5922
    0.5044    0.2476    0.7125    0.5882
    0.4940    0.2293    0.7375    0.5872
    0.4943    0.2245    0.7417    0.5895
    0.5048    0.2367    0.7222    0.5929
    0.5171    0.2564    0.6938    0.5949
    0.5192    0.2648    0.6843    0.5933
    0.5084    0.2532    0.7041    0.5891
    0.4960    0.2336    0.7320    0.5870
    0.4930    0.2241    0.7431    0.5886
    0.5011    0.2318    0.7296    0.5919
    0.5142    0.2511    0.7011    0.5946

    -1 * (y == k) .* log(a3(:, k))

ans =

         0
         0
    0.5214
         0
         0
         0
    0.5324
         0
         0
         0
    0.5221
         0
         0
         0
    0.5244
         0

         - (1 - (y == k)) .* log(1 - a3(:, k))

ans =

    0.8858
    0.8927
         0
    0.9036
    0.8970
    0.8871
         0
    0.8904
    0.8986
    0.9036
         0
    0.8895
    0.8844
    0.8883
         0
    0.9029 */
